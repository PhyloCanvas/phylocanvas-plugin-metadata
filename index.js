!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("phylocanvas"));else if("function"==typeof define&&define.amd)define(["phylocanvas"],t);else{var a=t("object"==typeof exports?require("phylocanvas"):e.phylocanvas);for(var r in a)("object"==typeof exports?exports:e)[r]=a[r]}}(this,function(e){return function(e){function t(r){if(a[r])return a[r].exports;var l=a[r]={exports:{},id:r,loaded:!1};return e[r].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function n(e){return"circular"===e.treeType||"radial"===e.treeType}function i(e){return e.metadata.font?e.metadata.font:Math.min(e.textSize,e.metadata.blockLength)+"pt "+e.font}function o(e){var t=e.metadata,a=t.columns,r=t.propertyName;return a.length>0?a:Object.keys(e.leaves[0][r])}function s(e){if(!e.metadata.showHeaders)return!1;var t=e.treeType,a=e.alignLabels;return"diagonal"===t||a&&"rectangular"===t||"hierarchical"===t}function h(e){var t=e.metadata,a=t.blockLength,r=t.padding,l=t._labelWidthTotal;return 2*e.baseNodeSize+r+l+o(e).length*(a+r)}function c(e){var t=0;if(s(e)){var a=o(e);e.canvas.font=i(e);var r=!0,l=!1,n=void 0;try{for(var h,c=a[Symbol.iterator]();!(r=(h=c.next()).done);r=!0){var d=h.value;t=Math.max(t,e.canvas.measureText(d).width+20)}}catch(f){l=!0,n=f}finally{try{!r&&c["return"]&&c["return"]()}finally{if(l)throw n}}}return t}function d(e){if(e.metadata.maxBlockSize)return e.metadata.maxBlockSize;if(n(e)){var t=0,a=!0,r=!1,l=void 0;try{for(var i,o=e.leaves[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value,h=s.getLabelStartX();(e.showLabels||e.hoverLabel&&s.highlighted)&&(h+=e.maxLabelLength[e.treeType]);var c=e.alignLabels?e.labelAlign.getLabelOffset(s):0,d=Math.hypot(s.centerx-s.startx,s.centery-s.starty)+h+c;d>t&&(t=d)}}catch(f){r=!0,l=f}finally{try{!a&&o["return"]&&o["return"]()}finally{if(r)throw l}}return e.metadata.maxBlockSize=p.FULL*t/e.leaves.length,e.metadata.maxBlockSize}return e.step}function f(e,t,a){var r=e.tree.canvas,l=e.tree.treeType,n=e.tree.metadata,o=n._maxLabelWidth,s=n.blockLength,h=n.padding,c=n.fillStyle,d=n.strokeStyle,f=n.underlineHeaders,u=n.rotateHeaders,y=e.tree.metadata.columns.length>0?e.tree.metadata.columns:Object.keys(e.data),v=e.tree.metadata.lineWidth/e.tree.zoom;r.font=i(e.tree),r.fillStyle=c,r.strokeStyle=d,r.lineWidth=v;var m=t,b="hierarchical"===l?-a:a,g=!0,p=!1,x=void 0;try{for(var L,w=y[Symbol.iterator]();!(g=(L=w.next()).done);g=!0){var S=L.value,T=s+o[S];if(u?(r.textAlign="hierarchical"===l?"right":"left",r.textBaseline="middle",e.canvas.rotate(-Math.PI/2),e.canvas.fillText(S,b,m+T/2),e.canvas.rotate(Math.PI/2)):(r.textAlign="center",r.textBaseline="hierarchical"===l?"top":"bottom",e.canvas.fillText(S,m+T/2,-b)),f){var _="hierarchical"===l?a-v:-a+v;r.beginPath(),r.moveTo(m,_),r.lineTo(m+T,_),r.stroke(),r.closePath()}m+=T+h}}catch(k){p=!0,x=k}finally{try{!g&&w["return"]&&w["return"]()}finally{if(p)throw x}}}function u(e){var t=e.tree.canvas,a=e.tree,r=e.tree.metadata,l=r._maxLabelWidth,o=r.blockSize,h=r.blockLength,c=r.padding,u=r.propertyName,y=r.fillStyle,v=r.columns,m=r.showLabels,b=e.getLabelStartX(),g=0;(a.showLabels||a.hoverLabel&&e.highlighted)&&(b+=a.maxLabelLength[a.treeType]);var x=d(a),L=Math.min(x,o);a.alignLabels&&(b+=a.labelAlign.getLabelOffset(this)),b+=c,g-=L/2,!a.metadata._headingDrawn&&s(a)&&(f(e,b,L),a.metadata._headingDrawn=!0);var w=this[u];if(Object.keys(w).length>0){t.beginPath();var S=v.length>0?v:Object.keys(w),T=1,_=n(a)&&a.alignLabels?p.FULL*h/a.leaves.length:0,k=i(a),A=!0,B=!1,j=void 0;try{for(var z,W=S[Symbol.iterator]();!(A=(z=W.next()).done);A=!0){var M=z.value;"undefined"!=typeof w[M]&&(t.fillStyle=w[M].colour||w[M],t.fillRect(b,g,h,L+T*_),m&&"string"==typeof w[M].label&&(t.font=k,t.fillStyle=y,t.textAlign="left",t.textBaseline="middle",t.fillText(w[M].label,b+h+c/4,g+L/2))),b+=h+c+l[M],T++}}catch(O){B=!0,j=O}finally{try{!A&&W["return"]&&W["return"]()}finally{if(B)throw j}}t.stroke(),t.closePath()}}function y(e){var t=e.canvas,a=e.metadata,r=a.showLabels,l=a.propertyName,n=a.columns,o=a.rotateHeaders,s=n.length>0?n:Object.keys(e.leaves[0][l]);t.font=i(e);var h={};if(r){var c=!0,d=!1,f=void 0;try{for(var u,y=s[Symbol.iterator]();!(c=(u=y.next()).done);c=!0){var v=u.value;h[v]=o?0:t.measureText(v).width}}catch(m){d=!0,f=m}finally{try{!c&&y["return"]&&y["return"]()}finally{if(d)throw f}}var b=!0,g=!1,p=void 0;try{for(var x,L=e.leaves[Symbol.iterator]();!(b=(x=L.next()).done);b=!0){var w=x.value,S=w[l],T=!0,_=!1,k=void 0;try{for(var A,B=s[Symbol.iterator]();!(T=(A=B.next()).done);T=!0){var j=A.value;if(S[j]&&"string"==typeof S[j].label){var z=t.measureText(S[j].label).width;z>h[j]&&(h[j]=z)}}}catch(m){_=!0,k=m}finally{try{!T&&B["return"]&&B["return"]()}finally{if(_)throw k}}}}catch(m){g=!0,p=m}finally{try{!b&&L["return"]&&L["return"]()}finally{if(g)throw p}}}else{var W=!0,M=!1,O=void 0;try{for(var H,N=s[Symbol.iterator]();!(W=(H=N.next()).done);W=!0){var P=H.value;h[P]=0}}catch(m){M=!0,O=m}finally{try{!W&&N["return"]&&N["return"]()}finally{if(M)throw O}}}e.metadata._maxLabelWidth=h,e.metadata._labelWidthTotal=0;var D=!0,E=!1,F=void 0;try{for(var G,I=s[Symbol.iterator]();!(D=(G=I.next()).done);D=!0){var R=G.value;e.metadata._labelWidthTotal+=h[R]}}catch(m){E=!0,F=m}finally{try{!D&&I["return"]&&I["return"]()}finally{if(E)throw F}}}function v(e){e(b["default"],"createTree",function(e,t){var a=e.apply(void 0,l(t));return a.metadata=Object.assign({},{_headingDrawn:!1,_maxLabelWidth:{},_labelWidthTotal:0,show:!1,showHeaders:!0,showLabels:!0,blockLength:20,blockSize:Number.MAX_SAFE_INTEGER,padding:0,columns:[],propertyName:"data",underlineHeaders:!1,rotateHeaders:!1,headersRotationAngle:0,fillStyle:"black",strokeStyle:"black",lineWidth:1,font:null},a.metadata||{}),a});var t=m.Tree.prototype.__lookupGetter__("alignLabels");m.Tree.prototype.__defineGetter__("alignLabels",function(){return this.metadata.show?this.labelAlign&&this.labelAlignEnabled:t.call(this)}),e(m.Tree,"draw",function(e,t){e.apply(this,t),this.metadata.show&&(this.metadata._headingDrawn=!1,this.metadata.maxBlockSize=null,y(this))}),e(m.Tree,"getBounds",function(e,t){var a=e.apply(this,t);if(this.metadata.show){var r=a[0][0],l=a[0][1],n=a[1][0],i=a[1][1],o=c(this),s=this.treeType,h="rectangular"===s||"diagonal"===s,d="hierarchical"===s;return[[r-(d?o:0),l-(h?o:0)],[n,i]]}return a}),e(m.Branch,"drawLeaf",function(e){e.call(this),this.tree.metadata.show&&u.call(this,this)}),e(m.Branch,"getTotalSize",function(e){var t=e.call(this);return this.tree.metadata.show&&(t+=h(this.tree)),t}),e(m.Branch,"getTotalLength",function(e){var t=e.call(this);return this.tree.metadata.show&&(t+=h(this.tree)),t})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=v;var m=a(1),b=r(m),g=m.utils.constants,p=g.Angles},function(t,a){t.exports=e}])});